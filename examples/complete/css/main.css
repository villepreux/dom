<?php require_once(__DIR__."/../dom.php");

use function dom\{set,get,unsplash_url_img};

$unsplash          = explode(',',get("unsplash"));
$unsplash_id       = get($unsplash, 0);
$unsplash_author   = get($unsplash, 1);

?>

:root {
    
    --light-theme-color: #408;
    --light-accent-color: #e10047;

    --dark-theme-color: #11ccee;
    --dark-accent-color: #ff96ff;

    --dark-background-darker-color: #101015;
    --dark-background-color: #161619;
    --dark-background-lighter-color: #191922;

    --gap: 1.5rem;

    --header-height:          256px;
    --header-min-height:       64px;
    --header-toolbar-height:   64px;
}

.toolbar-row-banner { 
    
    background-color: var(--theme-color);
    background-blend-mode: luminosity;
    background-size: cover; 
    background-position: center; 
    background-image: url(<?= unsplash_url_img($unsplash_id, 1200, 800, $unsplash_author) ?>);
}

@media screen and (max-width: 900px) { .toolbar-row-banner { background-image: url(<?= unsplash_url_img($unsplash_id, 900, 600, $unsplash_author) ?>); } }
@media screen and (max-width: 700px) { .toolbar-row-banner { background-image: url(<?= unsplash_url_img($unsplash_id, 720, 480, $unsplash_author) ?>); } }
@media screen and (max-width: 500px) { .toolbar-row-banner { background-image: url(<?= unsplash_url_img($unsplash_id, 480, 320, $unsplash_author) ?>); } }
@media screen and (max-width: 300px) { .toolbar-row-banner { background-image: url(<?= unsplash_url_img($unsplash_id, 300, 200, $unsplash_author) ?>); } }

article {

    border-radius: .75em;
    border-color: var(--background-color);
    box-shadow: 2px 2px 8px 2px #00000036;
}

.grid { 
    
    grid-template-columns: repeat(auto-fit, minmax(min(calc(100vw - 6 * var(--gap)), 300px), 1fr));
    margin-bottom: var(--gap); 
}

.card {

    border-radius: .5em;
    border-color: var(--background-lighter-color);
    box-shadow: 2px 2px 8px 2px #00000036;
}
.card_title {
    border-top-left-radius: .5em;
    border-top-right-radius: .5em;
}

.ajax-container {
    margin-bottom: 0; 
}
.ajax-container img[alt="loading"] {

    width: 100%;
    height: auto;
    aspect-ratio: 300 / 200;
    object-fit: contain;
}

/* Introspection code */

article .ide {
    
    border-radius: .5em;
    border-color: var(--background-lighter-color);
    box-shadow: 2px 2px 8px 2px #00000036;

    margin-inline: min(calc(1 * var(--gap)), calc(-0.5 * max(0px, calc(100vw - 2 * var(--gap) - var(--max-text-width)))));
    width: calc(100vw - 2 * var(--margin-gap));
}